记录最近一段时间，看到的值得分享的东西

### [域名](http://www.ruanyifeng.com/blog/2018/05/root-domain.html)

全世界域名的最高管理机构，是一个叫做 ICANN （Internet Corporation for Assigned Names and Numbers）的组织。它的总部在美国加州。

> ==**TLD**==

所谓顶级域名（TLD），就是最高层级的域名。简单说，就是网址的最后一个部分。比如，网址www.example.com的顶级域名就是.com。

> ==**Verisign**==

Verisign 是一家商业公司，总部在美国维吉尼亚州。它托管了.com、.net 、.name、.gov这四个一般性顶级域名，以及.cc和.tv这两个国别顶级域名。另外，.edu和.jobs的后台管理工作，也外包给了它。

> ==**根域名**==

由于 ICANN 管理着所有的顶级域名，所以它是最高一级的域名节点，被称为根域名（root domain）。在有些场合，www.example.com被写成www.example.com.，即最后还会多出一个点。这个点就是根域名。


### [TCP 协议简介](http://www.ruanyifeng.com/blog/2017/06/tcp-protocol.html)

http://www.ruanyifeng.com/blogimg/asset/2017/bg2017060804.png

TCP 是以太网协议和 IP 协议的上层协议，也是应用层协议的下层协议。

TCP 并没有提供任何机制，表示原始文件的大小，这由应用层的协议来规定。比如，HTTP 协议就有一个头信息Content-Length，表示信息体的大小。对于操作系统来说，就是持续地接收 TCP 数据包，将它们按照顺序组装好，一个包都不少。

应用程序收到组装好的原始数据，以浏览器为例，就会根据 HTTP 协议的Content-Length字段正确读出一段段的数据。这也意味着，一次 TCP 通信可以包括多个 HTTP 通信。

> ==**慢启动**==

TCP 协议为了做到效率与可靠性的统一，设计了一个慢启动（slow start）机制。开始的时候，发送得较慢，然后根据丢包的情况，调整速率：如果不丢包，就加快发送速度；如果丢包，就降低发送速度。

> ==**ACK**==

默认情况下，接收方每收到两个 TCP 数据包，就要发送一个确认消息。"确认"的英语是 acknowledgement，所以这个确认消息就简称 ACK。

ACK 携带两个信息。
	
	1.期待要收到下一个数据包的编号
	2.接收方的接收窗口的剩余容量
	
> ==**数据包的遗失处理**==

TCP 协议可以保证数据通信的完整性，这是怎么做到的？

前面说过，每一个数据包都带有下一个数据包的编号。如果下一个数据包没有收到，那么 ACK 的编号就不会发生变化。

举例来说，现在收到了4号包，但是没有收到5号包。ACK 就会记录，期待收到5号包。过了一段时间，5号包收到了，那么下一轮 ACK 会更新编号。如果5号包还是没收到，但是收到了6号包或7号包，那么 ACK 里面的编号不会变化，总是显示5号包。这会导致大量重复内容的 ACK。

如果发送方发现收到三个连续的重复 ACK，或者超时了还没有收到任何 ACK，就会确认丢包，即5号包遗失了，从而再次发送这个包。通过这种机制，TCP 保证了不会有数据包丢失。

### [DNS入门](http://www.ruanyifeng.com/blog/2016/06/dns.html)

DNS （Domain Name System 的缩写）的作用非常简单，就是根据域名查出IP地址。你可以把它想象成一本巨大的电话本。

### [敏捷开发入门教程](http://www.ruanyifeng.com/blog/2019/03/agile-development.html)

敏捷开发（agile development）是非常流行的软件开发方法。

> ==**迭代开发**==

敏捷开发的核心是迭代开发（iterative development）。敏捷一定是采用迭代开发的方式。

对于大型软件项目，传统的开发方式是采用一个大周期（比如一年）进行开发，整个过程就是一次"大开发"；迭代开发的方式则不一样，它将开发过程拆分成多个小周期，即一次"大开发"变成多次"小开发"，每次小开发都是同样的流程，所以看上去就好像重复在做同样的步骤。

==**迭代开发将一个大任务，分解成多次连续的开发，本质就是逐步改进。**==开发者先快速发布一个有效但不完美的最简版本，然后不断迭代。每一次迭代都包含规划、设计、编码、测试、评估五个步骤，不断改进产品，添加新功能。通过频繁的发布，以及跟踪对前一次迭代的反馈，最终接近较完善的产品形态。

> ==**增量开发**==

所谓"增量开发"，指的是软件的每个版本，都会新增一个用户可以感知的完整功能。也就是说，按照新增功能来划分迭代。

**==增量开发加上迭代开发，才算真正的敏捷开发。==**

> ==**好处：**==

1. 早期交付
	
	敏捷开发的第一个好处，就是早期交付，从而大大降低成本。
	
2. 降低风险

	敏捷开发的第二个好处是，及时了解市场需求，降低产品不适用的风险，及时改变产品方向。
	

> **==每一次迭代==**

每次迭代都是一个完整的软件开发周期，必须按照软件工程的方法论，进行正规的流程管理。

1. 需求分析（requirements analysis）
2. 设计（design）
3. 编码（coding）
4. 测试（testing）
5. 部署和评估（deployment / evaluation）

> **==价值观==**

《敏捷软件开发宣言》里面提到四个价值观。

1. 程序员的主观能动性，以及程序员之间的互动，优于既定流程和工具。
2. 软件能够运行，优于详尽的文档。
3. 跟客户的密切协作，优于合同和谈判。
4. 能够响应变化，优于遵循计划。

该宣言还提出十二条敏捷开发的原则。

1. 通过早期和持续交付有价值的软件，实现客户满意度。
2. 欢迎不断变化的需求，即使是在项目开发的后期。要善于利用需求变更，帮助客户获得竞争优势。
3. 不断交付可用的软件，周期通常是几周，越短越好。
4. 项目过程中，业务人员与开发人员必须在一起工作。
5. 项目必须围绕那些有内在动力的个人而建立，他们应该受到信任。
6. 面对面交谈是最好的沟通方式。
7. 可用性是衡量进度的主要指标。
8. 提倡可持续的开发，保持稳定的进展速度。
9. 不断关注技术是否优秀，设计是否良好。
10. 简单性至关重要，尽最大可能减少不必要的工作。
11. 最好的架构、要求和设计，来自团队内部自发的认识。
12. 团队要定期反思如何更有效，并相应地进行调整。

### [DDOS 攻击的防范教程](http://www.ruanyifeng.com/blog/2018/06/ddos.html)

DDOS 里面的 DOS 是 denial of service（停止服务）的缩写，表示这种攻击的目的，就是使得服务中断。最前面的那个 D 是 distributed （分布式）

这就是 DDOS 攻击，它在短时间内发起大量请求，耗尽服务器的资源，无法响应正常的访问，造成网站实质下线。

> **==DDOS 的种类==**

DDOS 不是一种攻击，而是一大类攻击的总称。它有几十种类型，新的攻击方法还在不断发明出来。网站运行的各个环节，都可以是攻击目标。只要把一个环节攻破，使得整个流程跑不起来，就达到了瘫痪服务的目的。

其中，比较常见的一种攻击是 cc 攻击。它就是简单粗暴地送来大量正常的请求，超出服务器的最大承受量，导致宕机。

> **==防范措施==**

1. **备用网站**

	防范 DDOS 的第一步，就是你要有一个备份网站，或者最低限度有一个临时主页。生产服务器万一下线了，可以立刻切换到备份网站，不至于毫无办法。

2. **HTTP 请求的拦截**

	如果恶意请求有特征，对付起来很简单：直接拦截它就行了。
	
	HTTP 请求的特征一般有两种：IP 地址和 User Agent 字段。
	比如，恶意请求都是从某个 IP 段发出的，那么把这个 IP 段封掉就行了。
	或者，它们的 User Agent 字段有特征（包含某个特定的词语），那就把带有这个词语的请求拦截。
	
	> 拦截可以在三个层次做。
	
	**（1）专用硬件**

	Web 服务器的前面可以架设硬件防火墙，专门过滤请求。这种效果最好，但是价格也最贵。
	
	**（2）本机防火墙**
	
	操作系统都带有软件防火墙,但防不住大型攻击.
	
	**（3）Web 服务器**
	
	Web 服务器也可以过滤请求。拦截 IP 地址1.2.3.4
	
	Web 服务器的拦截非常消耗性能，尤其是 Apache。稍微大一点的攻击，这种方法就没用了。
	
3. **带宽扩容**

	真正的 DDOS 攻击是没有特征的，它的请求看上去跟正常请求一样，而且来自不同的 IP 地址，所以没法拦截。这就是为什么 DDOS 特别难防的原因。
	
	对于网站来说，就是在短时间内急剧扩容，提供几倍或几十倍的带宽，顶住大流量的请求。这就是为什么云服务商可以提供防护产品，因为他们有大量冗余带宽，可以用来消化 DDOS 攻击。
	
	一个朋友传授了一个方法，给我留下深刻印象。某云服务商承诺，每个主机保 5G 流量以下的攻击，他们就一口气买了5个。网站架设在其中一个主机上面，但是不暴露给用户，其他主机都是镜像，用来面对用户，DNS 会把访问量均匀分配到这四台镜像服务器。一旦出现攻击，这种架构就可以防住 20G 的流量，如果有更大的攻击，那就买更多的临时主机，不断扩容镜像。
	
4. **CDN**

	CDN 指的是网站的静态内容分发到多个服务器，用户就近访问，提高速度。因此，CDN 也是带宽扩容的一种方法，可以用来防御 DDOS 攻击。
	
	**镜像服务器，本质就是自己搭建一个微型 CDN。各大云服务商提供的高防 IP，背后也是这样做的：网站域名指向高防 IP，它提供一个缓冲层，清洗流量，并对源服务器的内容进行缓存。**
	
	这里有一个关键点，==一旦上了 CDN，千万不要泄露源服务器的 IP 地址==，否则攻击者可以绕过 CDN 直接攻击源服务器，前面的努力都白费。搜一下["绕过 CDN 获取真实 IP 地址"](https://www.baidu.com/s?wd=cdn%20%E7%9C%9F%E5%AE%9Eip)，你就会知道国内的黑产行业有多猖獗。
	
### [如何读懂火焰图？](http://www.ruanyifeng.com/blog/2017/09/flame-graph.html)

火焰图（flame graph）是性能分析的利器。

软件的性能分析，往往需要查看 CPU 耗时，了解瓶颈在哪里。

本文讲解了 

1. Linux 系统原生提供的性能分析工具（perf 命令）
2. Node 应用的火焰图
3. 浏览器的火焰图

Chrome 浏览器可以生成页面脚本的火焰图，用来进行 CPU 分析。

打开开发者工具，切换到 Performance 面板。然后，点击"录制"按钮，开始记录数据。这时，可以在页面进行各种操作，然后停止"录制"。

浏览器的火焰图与标准火焰图有两点差异：它是倒置的（即调用栈最顶端的函数在最下方）；x 轴是时间轴，而不是抽样次数。

### [JWT 入门](http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html)

JWT ： JSON Web Token 是目前最流行的==跨域认证解决方案==，本文介绍它的原理和用法。

> **互联网服务离不开用户认证。一般流程是下面这样。**

* 用户向服务器发送用户名和密码。

* 服务器验证通过后，在当前对话（session）里面保存相关数据，比如用户角色、登录时间等等。

* 服务器向用户返回一个 session_id，写入用户的 Cookie。

* 用户随后的每一次请求，都会通过 Cookie，将 session_id 传回服务器。

* 服务器收到 session_id，找到前期保存的数据，由此得知用户的身份。

这种模式的问题在于，扩展性（scaling）不好。单机当然没有问题，如果是服务器集群，或者是跨域的服务导向架构，就要求 session 数据共享，每台服务器都能够读取 session。

> **原理**

JWT 的原理是，服务器认证以后，生成一个 JSON 对象，发回给用户，就像下面这样。

		{
			"姓名": "张三",
			"角色": "管理员",
			"到期时间": "2018年7月1日0点0分"
		}
以后，用户与服务端通信的时候，都要发回这个 JSON 对象。服务器完全只靠这个对象认定用户身份。为了防止用户篡改数据，服务器在生成这个对象的时候，会加上签名（详见后文）。

服务器就不保存任何 session 数据了，也就是说，服务器变成无状态了，从而比较容易实现扩展。

> **JWT 的数据结构**

实际的 JWT 大概就像下面这样。

https://www.wangbase.com/blogimg/asset/201807/bg2018072304.jpg

它是一个很长的字符串，中间用点（.）分隔成三个部分。注意，JWT 内部是没有换行的，这里只是为了便于展示，将它写成了几行。

JWT 的三个部分依次如下。

* Header（头部）
* Payload（负载）
* Signature（签名）


> **==JWT 的几个特点==**

1. JWT 默认是不加密，但也是可以加密的。生成原始 Token 以后，可以用密钥再加密一次。

1. JWT 不加密的情况下，不能将秘密数据写入 JWT。

1. JWT 不仅可以用于认证，也可以用于交换信息。有效使用 JWT，可以降低服务器查询数据库的次数。

1. JWT 的最大缺点是，由于服务器不保存 session 状态，因此无法在使用过程中废止某个 token，或者更改 token 的权限。也就是说，一旦 JWT 签发了，在到期之前就会始终有效，除非服务器部署额外的逻辑。

1. JWT 本身包含了认证信息，一旦泄露，任何人都可以获得该令牌的所有权限。为了减少盗用，JWT 的有效期应该设置得比较短。对于一些比较重要的权限，使用时应该再次对用户进行认证。

1. 为了减少盗用，JWT 不应该使用 HTTP 协议明码传输，要使用 HTTPS 协议传输。

### [如何使用 Issue 管理软件项目？](http://www.ruanyifeng.com/blog/2017/08/issue.html)

> **Issue 是什么？**

Issue 指的是一项待完成的工作，通常与系统的改进相关，中文可以译为"问题"或"事务"。下面这些都是 Issue 的例子。

* 一个软件的 bug

* 一项功能建议

* 一项待完成的任务

* 文档缺失的报告


历史上，Issue 起源于客服部门。用户打电话反映问题，客服就创建一个工单（ticket），后续的每一个处理步骤、每一次与用户的交流，都要更新工单，记录全部信息。这就是 Issue 的前身。

> **Issue 跟踪管理系统**

专门管理 Issue 的软件，叫做 Issue 跟踪管理系统（Issue tracking system）。它面向所有人，普通用户也可以使用。

还有一种 Bug 跟踪管理系统，通常只面向开发者，

Issue 跟踪管理系统应该具有以下功能。

* 项目管理 
  - 指定 Issue 的优先级 
  - 指定 Issue 所在的阶段 
  - 分配负责 Issue 的处理人员 
  - 制定日程 
  - 监控进度，提供统计
* 团队合作 
  - 讨论 
  - 邮件通知
* 代码管理 
  - 将 Issue 关联源码 
  - 将 Issue 关联代码提交与合并

目前，最出名的 Issue 跟踪管理系统是 [JIRA](https://www.atlassian.com/software/jira)。

其他的 码云，禅道，以及百度开源的icafe 效率云都是不错的选择。

### [常用 Git 命令清单](http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html)

一般来说，日常使用只要记住下图6个命令，就可以了。但是熟练使用，恐怕要记住60～100个命令。

下面是我整理的常用 Git 命令清单。几个专用名词的译名如下。

* Workspace：工作区
* Index / Stage：暂存区
* Repository：仓库区（或本地仓库）
* Remote：远程仓库

包含：

* 新建代码库（3）
* 配置（4）
* 增加/删除文件（7）
* 代码提交（6）
* 分支（15）
* 标签（9）
* 查看信息（20）
* 远程同步（8）
* 撤销（10）
* 其他（1）

