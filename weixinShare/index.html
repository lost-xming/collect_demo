<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, minimal-ui">
        <script src="http://s4.dxlfile.com/??public/js/jquery-2.2.2.min.js,public/js/dxl2.js,public/js/m.js"></script>
        <script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
        <style>
        	html , body{
        		width: 100%;
				height: 100%;
        	}
			.demo{
				width: 100%;
				height: 100%;
				background-color: pink;
			}
        </style>
    </head>
    <body>
    	<div class="demo">8888888888
    	</div>
    <script>
		var obj3 = {
		        title: "结婚请帖婚礼邀请",
		        desc: "我们结婚了！诚邀您于100参加我们的婚礼！",
		        link: "http://event.daoxila.com/M-Marketing/JiaMeng/index.html", // 分享链接 必须是event.daoxila 域名下
		        link: location.href.split('#')[0], 
		        // imgUrl: dxlHttp.e + 'M-tools/invitation/1/images/weixinFenxiang.png',
		        success : function (){document.write("chenggong")},
		        cancel : function (){document.write("取消分享给朋友")}
		    }
		/**
		 *
		 * [fenXiang description]
		 * @param  {[type]} obj2  分享的参数
		 * @param  {[type]} debug 是否开启调试模式
		 * @return {[type]}
		 */
    	function fenXiang(obj2,debug){
    		// 默认分享文案
            var wxData = {
                title: "上海结婚网知名品牌", //分享标题
                desc: "到喜啦上海站免费为新人提供上海婚宴酒店预订、婚庆等服务,是新人必上的结婚网! 免费咨询热线:400-820-1709", //分享描述
                link: location.href.split('#')[0], // 分享链接
                imgUrl: dxlHttp.e + 'M-tools/invitation/1/images/weixinFenxiang.png', //分享图片
                success: "", //执行分享后的回调 
                cancel :""  // 取消分享的回调
            };
            wxData = $.extend({}, wxData, obj2);
            wxData.success = typeof(wxData.success) =="function" ? wxData.success : function (){};
            wxData.cancel = typeof(wxData.cancel) =="function" ? wxData.cancel : function (){};

    		debug = !!debug ? true : false;

    		$.getJSON(dxlHttp.n + 'wx?act=signature&url='+encodeURIComponent(window.location.href)+'&callback=?',function (data){
		        data = $.extend({}, data ,{"debug" : debug});
		        wx.config(data);
		        wx.ready(function () {
		                wx.checkJsApi({
		                    jsApiList: [
		                        'getNetworkType',
		                        'previewImage',
		                        'onMenuShareTimeline',
		                        'onMenuShareAppMessage',
		                        'onMenuShareQQ',
		                        'onMenuShareWeibo',
		                        'onMenuShareQZone'
		                    ]// 需要检测的JS接口列表，所有JS接口列表见附录2,
		                });
		                
		                var weixin = function (obj){
		                    wx.onMenuShareTimeline({
		                        title: obj.title,
		                        link: obj.link,
		                        imgUrl: obj.imgUrl,
		                        success: obj.success,
							    cancel: obj.cancel
		                    });
		                    wx.onMenuShareAppMessage({
		                        title: obj.title,
		                        desc: obj.desc,
		                        link: obj.link,
		                        imgUrl: obj.imgUrl,
		                        success: obj.success,
							    cancel: obj.cancel
		                    });
		                    wx.onMenuShareQQ({
		                        title: obj.title,
		                        desc: obj.desc,
		                        link: obj.link,
		                        imgUrl: obj.imgUrl,
		                         success: obj.success,
							    cancel: obj.cancel
		                    });
		                    wx.onMenuShareWeibo({
		                        title: obj.title,
		                        desc: obj.desc,
		                        link: obj.link,
		                        imgUrl: obj.imgUrl,
		                         success: obj.success,
							    cancel: obj.cancel
		                    });
		                    wx.onMenuShareQZone({
		                        title: obj.title,
		                        desc: obj.desc, 
		                        link: obj.link, 
		                        imgUrl: obj.imgUrl, 
		                        success: obj.success,
							    cancel: obj.cancel
		                    });
		                };
		                weixin(wxData);
		            });
		    });
    	}

    	fenXiang(obj3 ,true);
    </script>
    </body>
</html>